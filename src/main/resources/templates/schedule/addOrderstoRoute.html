<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
	<head lang="en" th:replace="fragments/head :: head"> </head>
	<body>
		<div lang="en" th:replace="fragments/header :: header"> </div>
		<div class="container">
		
		<form action="#" th:action="@{/schedule/addOrderstoRoute/{id}(id = ${route.getId()})}" method="post">
		
		<div class="panel panel-default">
		<div class="panel-body">
								<div th:if="${not #lists.isEmpty(orders)}">
								<h3>add orders to this route</h3>
           	           			<table class="table table-hover">
						    	<thead>
						    		<tr>
							    		<th>id</th>
							    		<th>client</th>
							    		<th>delivery adress</th>
							    		<th>ordered articles</th>
							    		<th>delivery date</th>
							    		<th>size</th>
							    		<th>weight</th>
							    		<th></th>
							    	</tr>
							    </thead>
							    <tbody>
							    	<tr th:each="order : ${orders}">
							    		<td><a th:href="@{/orders/{id}(id = ${order.getId()})}" th:text="${order.getId()}"></a></td>
							    		<td th:text="${order.getCustomer()}"></td>
							    		<td th:text="${order.getAddress()}"></td>
							    		<td th:text="${order.getOpenOrderItems().size()}"></td>
							    		<td th:text="${order.getDeliveryDateStr()}"></td>
							    		<td th:text="${order.getOpenSize()}"></td>
							    		<td th:text="${order.getOpenWeight()}"></td>
							    		<td><input th:type="submit" th:name="orderId" class="btn btn-success" th:value="${order.id}"></input></td>
									</tr>
								</tbody>
						    </table>
						    </div>
						    
						    <div th:if="${#lists.isEmpty(orders)}">
								<h3>no order fits in this route</h3>
							</div>
		</div>
		
		<div class="panel-body">
		
		
		<div th:if="${not #lists.isEmpty(route.getAllDeliveries())}">
								<h5>current deliveries of this route</h5>
           	           			<table class="table table-hover">
								    	<thead>
									    	<tr>
									    		<th>address</th>
									    		<th>orderitems</th>
									    		<th></th>
									    	</tr>
									    </thead>
									    <tbody>
									    	<tr th:each="delivery : ${route.getAllDeliveries()}">
									    		<td th:text="${delivery.getAddress().toString()}"></td>
									    		<td>
									    			<ul th:each= "orderItem : ${delivery.getItems()}">
									    				<li>
											    		<span th:text = "${orderItem.toString()}"> </span>
											    		<span> for customer </span> 
											    		 <span><a th:href="@{/customer/{id}(id = ${orderItem.getOrder().getCustomer().getId()})}"> <span th:text="${orderItem.getOrder().getCustomer().toString()}"></span>  </a> 
											    		</span>
											    		</li>
									    			</ul>
									    		</td>
									    		<td></td>
											</tr>
										</tbody>
										</table>
						    </div>
		
		
		
		
		</div>
		
		</div>
		</form>
		</div>
	</body>
</html>